{% extends "base.html" %}
{% block content %}
<!-- page content -->
<script>

//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
<!--$(document).ready(function() {-->
    <!--$('.example').DataTable( {-->
        <!--"paging":   false,-->
        <!--"ordering": false,-->
        <!--"info":     false-->
    <!--} );-->
<!--} );-->
function SwapDivsWithClick(div1,div2)
{
   d1 = document.getElementById(div1);
   d2 = document.getElementById(div2);
   if( d2.style.display == "none" )
   {
      d1.style.display = "none";
      d2.style.display = "block";
   }
   else
   {
      d1.style.display = "block";
      d2.style.display = "none";
   }
};
function changeText(id) {
    if(id.innerHTML == "Show Charts"){
        id.innerHTML = "Show Tables";
        }
    else if(id.innerHTML == "Show Tables"){
        id.innerHTML = "Show Charts";
    }
};
$(function() {
var date = new Date();
var currentMonth = date.getMonth();
var currentDate = date.getDate();
var currentYear = date.getFullYear();
$('.datepicker').datepicker({
maxDate: new Date(currentYear, currentMonth, currentDate-1),
minDate: new Date(2015, 12, 1)
});
});

</script>
<style>
.card-body{
min-height:124px !important;
}
.a{
    cursor: pointer;
}
.b{
    margin:0px 0px 0px 0px;
    padding:0px 0px 0px 5px;
    font-size:120%;
}
.c {
    padding: 0px !important;
}
.d{
margin: 10px;
}
.mb-4 {
    margin-bottom: 1rem !important;
}
.carousel-indicators{
    bottom: -10px !important;
}
.carousel-indicators .active{
    background-color:black;
}
.control-next{
    top:0px;
}
</style>
    <p id="p1"></p>
    <div class="container-fluid">
        <div class="animated fadeIn">
            <div>
                <div class="card">
                    <div class="card-body">
                        <div class="container" style="margin-top:20px">
                            <form method="post" action="/" name="form1">
                                <div class="form-row">
                                    <div class="col-md-3">
                                        <label><b>Present Start Date</b></label>
                                      <input name="pre_start" class="form-control datepicker a" placeholder="mm/dd/yyyy" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label><b>Present End Date</b></label>
                                      <input name="pre_end" class="form-control datepicker a" placeholder="mm/dd/yyyy" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label><b>Previous Start Date</b></label>
                                      <input name="prv_start" class="form-control datepicker a" placeholder="mm/dd/yyyy" required>
                                    </div>
                                    <div class="col-md-3">
                                        <label><b>Previous End Date</b></label>
                                      <input name="prv_end" class="form-control datepicker a" placeholder="mm/dd/yyyy" required>
                                    </div>
                                </div>
                                <div class="container" style="text-align:center; margin-top:10px">
                                    <button type="submit" class="btn btn-danger btn-sm">Submit</button>
                                </div>
                            </form>
                            <div class="container" style="text-align:center; margin-top:10px">
                                    {% if result %}
                                    <a href="javascript:SwapDivsWithClick('swapper-first','swapper-other')"><button class="btn btn-primary btn-sm" onclick="changeText(this)">Show Charts</button></a>
                                    {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% if result %}
            <div id="swapper-first" style="display:block;">
                <div class="animated fadeIn">
                    <div class="card-columns cols-2">
                        <div class="card">
                            <div class="card-header">
                                <font size="4">Sessions</font>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table  class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                            <thead>
                                                <tr>
                                                    <th>Country</th>
                                                    <th>Current</th>
                                                    <th>Previous</th>
                                                    <th>Change</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% for item in result['sessions'] %}
                                                    <tr>
                                                        <td>{{item['Country']}}</td>
                                                        <td>{{item['Current']}}</td>
                                                        <td>{{item['Previous']}}</td>
                                                        <td>{{item['Change']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <font size="4">Sessions by categories</font>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                            <thead>
                                                <tr>
                                                    <th>Country</th>
                                                    <th>Organic Search</th>
                                                    <th>Direct</th>
                                                    <th>Referral</th>
                                                    <th>Social</th>
                                                    <th>Paid Search</th>
                                                    <th>Email</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% for item in result['session_category'] %}
                                                    <tr>
                                                        <td>{{item['Country']}}</td>
                                                        <td>{{item['Organic Search']}}</td>
                                                        <td>{{item['Direct']}}</td>
                                                        <td>{{item['Referral']}}</td>
                                                        <td>{{item['Social']}}</td>
                                                        <td>{{item['Paid Search']}}</td>
                                                        <td>{{item['Email']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <font size="4">Events</font>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table  class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                            <thead>
                                                <tr>
                                                    <th>Country</th>
                                                    <th>HelloBar Events</th>
                                                    <th>Previous</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for item in result['Events'] %}
                                                    <tr>
                                                        <td>{{item['Country']}}</td>
                                                        <td>{{item['HelloBar Events']}}</td>
                                                        <td>{{item['Previous']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <font size="4">Devices</font>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-container">
                                            <table class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                                <thead>
                                                    <tr>
                                                        <th>Device</th>
                                                        <th>Goal Completions</th>
                                                        <th>Previous</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                {% for item in result['Devices'] %}
                                                    <tr>
                                                        <td>{{item['Device']}}</td>
                                                        <td>{{item['Goal Completions']}}</td>
                                                        <td>{{item['Previous']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <font size="4">CPC</font>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                            <thead>
                                                <tr>
                                                    <th>Paid Source</th>
                                                    <th>Goal Completions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for item in result['CPC'] %}
                                                    <tr>
                                                        <td>{{item['Paid Source']}}</td>
                                                        <td>{{item['Goal Completions']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    <font size="4">Top Conversions</font>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-hover table-outline table-sortable mb-0"  style="border-collapse: collapse !important;">
                                            <thead>
                                                <tr>
                                                    <th>Metric</th>
                                                    <th>Current</th>
                                                    <th>Previous</th>
                                                    <th>Change</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for item in result['Top_conversions'] %}
                                                    <tr>
                                                        <td>{{item['Metric']}}</td>
                                                        <td>{{item['Current']}}</td>
                                                        <td>{{item['Previous']}}</td>
                                                        <td>{{item['Change']}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <script src='https://cdn.jsdelivr.net/npm/chart.js@2.7.0/dist/Chart.min.js'></script>
    <!--<script src='https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.2.0'></script>-->
    <div class="container-fluid" id="swapper-other" style="display:none">
        <div class="animated fadeIn">
            <div class="card-columns cols-2">
                <div class="card">
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="myChart-1"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="myChart-2"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="myChart-4"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="myChart-3"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="myChart-5"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card">
                   <div class="card-body">
                       <div class="chart-wrapper">
                           <div id="myChart-6"></div>
                       </div>
                   </div>
               </div>
                <div class="card">
                   <div class="card-body">
                       <div class="chart-wrapper">
                           <div id="myChart-7"></div>
                       </div>
                   </div>
               </div>
            </div>
        </div>
    </div>
<script  type="text/javascript">
var plugin1 = { afterDatasetsDraw: function(chart) {
				var ctx = chart.ctx;

				chart.data.datasets.forEach(function(dataset, i) {
					var meta = chart.getDatasetMeta(i);
					if (!meta.hidden) {
						meta.data.forEach(function(element, index) {
							// Draw the text in black, with the specified font
							ctx.fillStyle = 'rgb(0, 0, 0)';

							var fontSize = 10;
							var fontStyle = 'normal';
							var fontFamily = 'Helvetica Neue';
							ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);

							// Just naively convert to string for now
							var dataString = dataset.data[index].toString();

							// Make sure alignment settings are correct
							ctx.textAlign = 'center';
							ctx.textBaseline = 'middle';

							var padding = 5;
							var position = element.tooltipPosition();
							ctx.fillText(dataString, position.x, position.y - (fontSize / 2) - padding);
						});
					}
				});
			}};

var plugin2 = { afterDatasetsDraw: function(chart) {
				var ctx = chart.ctx;

				chart.data.datasets.forEach(function(dataset, i) {
					var meta = chart.getDatasetMeta(i);
					if (!meta.hidden) {
						meta.data.forEach(function(element, index) {
							// Draw the text in black, with the specified font
							ctx.fillStyle = 'rgb(0, 0, 0)';

							var fontSize = 10;
							var fontStyle = 'normal';
							var fontFamily = 'Helvetica Neue';
							ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);

							// Just naively convert to string for now
							var dataString = dataset.data[index].toString();

							// Make sure alignment settings are correct
							ctx.textAlign = 'center';
							ctx.textBaseline = 'middle';

							var padding = 5;
							var position = element.tooltipPosition();
							ctx.fillText(dataString, position.x, position.y);
						});
					}
				});
			}};

var ctx1 = document.getElementById("myChart-2").getContext('2d');
var myChart1 = new Chart(ctx1, {
    plugins: [plugin1],
    type: 'bar',
    data: {
        labels: [{% for item in result['sessions'] %}
                  {%if item['Country'] != 'Total' %}
                  "{{item['Country']}}",
                  {% endif %}
              {% endfor %}],
        datasets: [{
            label: ['Current'],
            data: [{% for item in result['sessions'] %}
                    {%if item['Country'] != 'Total' %}
                  "{{item['Current']}}",
                  {% endif %}
                  {% endfor %}],
            backgroundColor: [{% for item in result['sessions'] %}
                    {%if item['Country'] != 'Total' %}
                  'rgba(240, 94, 16, 0.8)',
                  {% endif %}
                  {% endfor %}],
            borderColor: [{% for item in result['sessions'] %}
                    {%if item['Country'] != 'Total' %}
                  'rgba(240, 94, 16,1)',
                  {% endif %}
                  {% endfor %}],
            borderWidth: 0.5
        },
        {
            label: ['Change percentage'],
            type: 'line',
            fill: false,
            data: [-30.5, -6.77, -15.82,-2.13,-9.5,-4.51-35.85,-10.61,-16.61],
            backgroundColor: [
                  'rgba(16, 26, 240, 0.8)',
                  ],
            borderColor: [
                  'rgba(16, 26, 240, 0.8)',
                  ]
        }]
    },
    options: {
        title: {
			display: true,
			text: 'SESSIONS'
			},
        tooltips: {
            mode: 'index',
            intersect: false,
            },
        scales: {
            yAxes: [{
                stacked: true,
                gridLines: {
                    display:true
                },
                ticks: {
                    beginAtZero:true
                }
            }],
            xAxes: [{
                stacked: true,
                gridLines: {
                    display:true
                },
            }]
        }
    }
});
var ctx2 = document.getElementById("myChart-1").getContext('2d');
var myChart2 = new Chart(ctx2, {
			type: 'bar',
			data: {
				labels: ['UK', 'US', 'France', 'China', 'India', 'SEA', 'ANZ', 'ROW'],
				datasets: [{
				datalabels: {
                    display: false,
                },
                label: ['Organic Search'],
                data: [{{result['session_category'][0]['Organic Search']}},{{result['session_category'][1]['Organic Search']}},
                {{result['session_category'][2]['Organic Search']}},{{result['session_category'][3]['Organic Search']}},
                {{result['session_category'][4]['Organic Search']}},{{result['session_category'][5]['Organic Search']}},
                {{result['session_category'][6]['Organic Search']}},{{result['session_category'][7]['Organic Search']}}],
                backgroundColor: [
                    'rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)',
                    'rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
            },
            {
                datalabels: {
                    display: false
                },
                label: ['Direct'],
                data: [{{result['session_category'][0]['Direct']}},{{result['session_category'][1]['Direct']}},
                {{result['session_category'][2]['Direct']}},{{result['session_category'][3]['Direct']}},
                {{result['session_category'][4]['Direct']}},{{result['session_category'][5]['Direct']}},
                {{result['session_category'][6]['Direct']}},{{result['session_category'][7]['Direct']}}],
                backgroundColor: [
                    'rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)',
                    'rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
                },
            {
                datalabels: {
                    display: false
                },
                label: ['Referral'],
                data: [{{result['session_category'][0]['Referral']}},{{result['session_category'][1]['Referral']}},
                {{result['session_category'][2]['Referral']}},{{result['session_category'][3]['Referral']}},
                {{result['session_category'][4]['Referral']}},{{result['session_category'][5]['Referral']}},
                {{result['session_category'][6]['Referral']}},{{result['session_category'][7]['Referral']}}],
                backgroundColor: [
                    'rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)',
                    'rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
                },
            {
                datalabels: {
                    display: false
                },
                label: ['Social'],
                data: [{{result['session_category'][0]['Social']}},{{result['session_category'][1]['Social']}},
                {{result['session_category'][2]['Social']}},{{result['session_category'][3]['Social']}},
                {{result['session_category'][4]['Social']}},{{result['session_category'][5]['Social']}},
                {{result['session_category'][6]['Social']}},{{result['session_category'][7]['Social']}}],
                backgroundColor: [
                    'rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)',
                    'rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)','rgba(22, 152, 31, 0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
                },
            {
                datalabels: {
                    display: false
                },
                label: ['Paid Search'],
                data: [{{result['session_category'][0]['Paid Search']}},{{result['session_category'][1]['Paid Search']}},
                {{result['session_category'][2]['Paid Search']}},{{result['session_category'][3]['Paid Search']}},
                {{result['session_category'][4]['Paid Search']}},{{result['session_category'][5]['Paid Search']}},
                {{result['session_category'][6]['Paid Search']}},{{result['session_category'][7]['Paid Search']}}],
                backgroundColor: [
                    'rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)',
                    'rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
                },
            {
                datalabels: {
                    display: false
                },
                label: ['Email'],
                data: [{{result['session_category'][0]['Email']}},{{result['session_category'][1]['Email']}},
                {{result['session_category'][2]['Email']}},{{result['session_category'][3]['Email']}},
                {{result['session_category'][4]['Email']}},{{result['session_category'][5]['Email']}},
                {{result['session_category'][6]['Email']}},{{result['session_category'][7]['Email']}}],
                backgroundColor: [
                    'rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)',
                    'rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)'
                ],
                borderColor: [
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
                    'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'
                ],
                borderWidth: 0.5
                },
            ]
        },
    options: {
        title: {
			display: true,
			text: 'SESSIONS BY CATEGORIES'
			},
        tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'index'
                },
        scales: {
            yAxes: [{
                stacked: true,
                gridLines: {
                    display:true
                }
            }],
            xAxes: [{
                stacked: true,
                gridLines: {
                    display:false
                },
            }]
        }
    }
});
</script>
<script src="http://www.chartjs.org/dist/2.7.2/Chart.bundle.js"></script>
<script src="http://www.chartjs.org/samples/latest/utils.js"></script>

<script type="text/javascript">
var barChartData = {
        labels: ['UK', 'USA', 'France', 'China', 'India', 'SEA', 'ANZ','ROW'],
        datasets: [{
            label: 'Organic Search',
            backgroundColor: [
               'rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)',
               'rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)','rgba(51, 100, 255, 0.8)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ OrganicSearchChange }}
        }, {
            label: 'Direct',
            backgroundColor: [
               'rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)',
               'rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)','rgba(255, 49, 49, 0.8)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ DirectChange }}
        }, {
            label: 'Referral',
            backgroundColor: [
               'rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)',
               'rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)','rgba(252, 135, 54,0.8)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ ReferralChange }}
        }, {
            label: 'Social',
            backgroundColor: [
               'rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)',
               'rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)','rgba(22, 152, 31, 0.5)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ SocialChange }}
        }, {
            label: 'Paid Search',
            backgroundColor: [
               'rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)',
               'rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)','rgba(218, 14, 247, 0.8)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ PaidSearchChange }}
        }, {
            label: 'Email',
            backgroundColor: [
               'rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)',
               'rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)','rgba(1, 169, 214, 0.8)'],
            borderColor: [
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)',
               'rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)','rgba(255, 255, 255, 1)'],
            borderWidth: 0.5,
            data: {{ EmailChange }}
        }]

    };
    window.onload = function() {
        var ctx = document.getElementById('myChart-3').getContext('2d');
        window.myBar = new Chart(ctx, {
            type: 'bar',
            data: barChartData,
            options: {
                title: {
                    display: true

                },
                tooltips: {
                    mode: 'index',
                    intersect: false
                },
                responsive: true,
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true,
                        ticks: {
								max: 80,
								min: -80,
							}
                    }]
                }
            }
        });
    };
</script>

<script type="text/javascript">
var ctx4 = document.getElementById("myChart-4").getContext('2d');
var myChart4 = new Chart(ctx4, {
    plugins: [plugin1],
    type: 'bar',
    data: {
        labels: [{% for item in result['Devices'] %}
                  "{{item['Device']}}",
              {% endfor %}],
        datasets: [{
            label: ['Current'],
            data: [{% for item in result['Devices'] %}
                  "{{item['Goal Completions']}}",
                  {% endfor %}],
            backgroundColor: [{% for item in result['Devices'] %}
                  'rgba(255, 99, 132, 1)',
                  {% endfor %}],
            borderColor: [{% for item in result['Devices'] %}
                  'rgba(255,99,132,1)',
                  {% endfor %}],
            borderWidth: 1
        },
        {
            label: ['Previous'],
            data: [{% for item in result['Devices'] %}
                  "{{item['Previous']}}",
                  {% endfor %}],
            backgroundColor: [{% for item in result['Devices'] %}
                  'rgba(54, 162, 235, 1)',
                  {% endfor %}],
            borderColor: [{% for item in result['Devices'] %}
                  'rgba(54, 162, 235, 1)',
                  {% endfor %}],
            borderWidth: 1
        }]
    },
    options: {
        title: {
			display: true,
			text: 'DEVICES'
			},
        tooltips: {
            mode: 'index',
            intersect: false,
            },
        scales: {
            yAxes: [{
                gridLines: {
                    display:true
                },
                ticks: {
                    beginAtZero:true
                }
            }],
            xAxes: [{
                gridLines: {
                    display:true
                },
            }]
        }
    }
});

var ctx5 = document.getElementById("myChart-5").getContext('2d');
var myChart5 = new Chart(ctx5, {
    plugins: [plugin1],
    type: 'pie',
    data: {
        labels: [{% for item in result['CPC'] %}
                   {% if item['Paid Source'] != 'Total' %}
                  "{{item['Paid Source']}}",
                  {% endif %}
                {% endfor %}],
        datasets: [{
            data: [{% for item in result['CPC'] %}
                   {% if item['Paid Source'] != 'Total' %}
                  "{{item['Goal Completions']}}",
                  {% endif %}
                {% endfor %}],
            backgroundColor: [
                'rgba(51, 100, 255, 0.5)',
                'rgba(255, 49, 49, 0.5)',
                'rgba(252, 135, 54, 0.5)',
                'rgba(22, 152, 31, 0.5)'
            ],
            borderColor: [
                'rgba(51, 100, 255,1)',
                'rgba(255, 49, 49, 1)',
                'rgba(252, 135, 54, 1)',
                'rgba(22, 152, 31, 1)',
            ],
            borderWidth: 0.5
        }]
    },
    options: {
        title: {
			display: true,
			text: 'CPC'
        },

    }
});
</script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['time period','Organic Search', 'Direct', 'Referral', 'Social', 'Paid Search',
         'Email'],
        ['Jan17', 28.19,-4.31,-6.05,-18.21,7.31,-26.1],
        ['Feb17', 8.19,-14.31,-6.05,-18.21,47.31,-26.1],
        ['Mar17', 18.19,-4.31,26.05,68.21,17.31,-26.1],
        ['Apr17', -8.19,54.31,-6.05,-18.21,7.31,-26.1],
        ['May17', 13.19,34.31,26.05,18.21,27.31,-26.1],
        ['June17',18.19,-4.31,11.05,-18.21,7.31,-26.1],
        ['Jul17',8.19,-14.31,6.05,8.21,10.31,-26.1],
        ['Aug17',48.19,4.31,-6.05,-18.21,7.31,-26.1]
      ]);

        var options = {
          curveType: 'function',
          chartArea:{left:100,top:60,width:"100%"},
    vAxis: {textStyle: {color: "#808080"},gridlines: {count: 10,color: "#808080"},baselineColor: '#808080'},
    hAxis: {textStyle: {color: "#808080"},gridlines: {count: 10,color: "#808080"},baselineColor: '#808080'},
          legend: { position: 'top' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('myChart-6'));

        chart.draw(data, options);
      }
    </script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['time period','UK', 'USA', 'France', 'China', 'India',
         'SEA','ANZ','ROW'],
        ['Jan17', 28,-4,-6,-18,7,-26,14,1],
        ['Feb17', 8,-14,-6,-18,47,-26,9,5],
        ['Mar17', 18,-4,26,68,17,-26,24,8],
        ['Apr17', -8,54,-6,-18,7,-26,1,25],
        ['May17', 13,34,26,18,27,-26,16,1],
        ['June17',18,-4,11,-18,7,-26,2,9],
        ['Jul17',8,-14,6,8,10,-26,14,8],
        ['Aug17',48,4,-6,-18,7,-26,17,14]
      ]);

        var options = {
            vAxis: {textStyle: {color: "#808080"},gridlines: {count: 10,color: "#808080"},baselineColor: '#808080'},
    hAxis: {textStyle: {color: "#808080"},gridlines: {count: 10,color: "#808080"},baselineColor: '#808080'},
          curveType: 'function',
          chartArea:{left:100,top:60,width:"100%"},

          legend: { position: 'top' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('myChart-7'));

        chart.draw(data, options);
      }
    </script>
{% endif %}
{% endblock %}
